"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{18046:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(40157).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},36943:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var r=a(95155),s=a(12115),l=a(85511),n=a(66695),i=a(30285),d=a(54165),c=a(62523),o=a(85057),u=a(59409),m=a(88539),x=a(26126),f=a(66424),h=a(18046),p=a(51920),g=a(77223),j=a(37648);let N=(0,a(40157).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var y=a(50172),v=a(76959),b=a(41876);function w(e,t){var a;let r,s,l=null!=(a=null==t?void 0:t.additionalDigits)?a:2,n=function(e){let t,a={},r=e.split(C.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],C.timeZoneDelimiter.test(a.date)&&(a.date=e.split(C.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){let e=C.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(n.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,l=r[2]?parseInt(r[2]):null;return{year:null===l?s:100*l,restDateString:e.slice((r[1]||r[2]).length)}}(n.date,l);r=function(e,t){var a,r,s,l,n,i,d,c;if(null===t)return new Date(NaN);let o=e.match(k);if(!o)return new Date(NaN);let u=!!o[4],m=T(o[1]),x=T(o[2])-1,f=T(o[3]),h=T(o[4]),p=T(o[5])-1;if(u){return(a=0,r=h,s=p,r>=1&&r<=53&&s>=0&&s<=6)?function(e,t,a){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+a+1-s)),r}(t,h,p):new Date(NaN)}{let e=new Date(0);return(l=t,n=x,i=f,n>=0&&n<=11&&i>=1&&i<=(A[n]||(F(l)?29:28))&&(d=t,(c=m)>=1&&c<=(F(d)?366:365)))?(e.setUTCFullYear(t,x,Math.max(m,f)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let i=r.getTime(),d=0;if(n.time&&isNaN(d=function(e){var t,a,r;let s=e.match(D);if(!s)return NaN;let l=U(s[1]),n=U(s[2]),i=U(s[3]);return(t=l,a=n,r=i,24===t?0===a&&0===r:r>=0&&r<60&&a>=0&&a<60&&t>=0&&t<25)?l*b.s0+n*b.Cg+1e3*i:NaN}(n.time)))return new Date(NaN);if(n.timezone){if(isNaN(s=function(e){var t,a;if("Z"===e)return 0;let r=e.match(M);if(!r)return 0;let s="+"===r[1]?-1:1,l=parseInt(r[2]),n=r[3]&&parseInt(r[3])||0;return(t=0,(a=n)>=0&&a<=59)?s*(l*b.s0+n*b.Cg):NaN}(n.timezone)))return new Date(NaN)}else{let e=new Date(i+d),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(i+d+s)}let C={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},k=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,D=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,M=/^([+-])(\d{2})(?::?(\d{2}))?$/;function T(e){return e?parseInt(e):1}function U(e){return e&&parseFloat(e.replace(",","."))||0}let A=[31,null,31,30,31,30,31,31,30,31,30,31];function F(e){return e%400==0||e%4==0&&e%100!=0}var S=a(83013),E=a(46375),z=a(19599),P=a(35317),R=a(23769),Z=a(97714),J=a(59434);function $(){let{user:e}=(0,z.useUser)(),t=(0,z.useFirestore)(),[a,b]=(0,s.useState)(new Date),[C,k]=(0,s.useState)(!1),[D,M]=(0,s.useState)(!1),[T,U]=(0,s.useState)(null),[A,F]=(0,s.useState)(""),[$,I]=(0,s.useState)(""),[H,q]=(0,s.useState)("event"),[G,L]=(0,s.useState)(""),[Y,_]=(0,s.useState)(""),B=(0,z.useMemoFirebase)(()=>e?(0,P.P)((0,P.rJ)(t,"events"),(0,P._M)("userId","==",e.uid)):null,[e,t]),{data:W=[],isLoading:V}=(0,R.G)(B),O=(0,s.useMemo)(()=>a?(W||[]).filter(e=>(0,v.r)(w(e.date),a)):[],[a,W]),K=e=>{e?(U(e),F(e.title),I(e.description||""),q(e.type),L(e.location||""),_(e.time||"")):(U(null),F(""),I(""),q("event"),L(""),_("")),k(!0)},Q=async()=>{if(e&&a&&A.trim()){M(!0);try{let r=(0,P.wP)(t),s={date:(0,S.GP)(a,"yyyy-MM-dd"),title:A,description:$,type:H,location:G,time:Y,userId:e.uid};if(T){let e=(0,P.H9)(t,"events",T.id);r.update(e,s),await (0,Z.j)(r,{operation:"update",path:"events/".concat(T.id),data:s})}else{let e=(0,P.H9)((0,P.rJ)(t,"events"));r.set(e,{...s,id:e.id}),await (0,Z.j)(r,{operation:"create",path:"events/".concat(e.id),data:s})}k(!1)}catch(e){console.error("Error saving event:",e)}finally{M(!1)}}},X=async e=>{if(confirm("האם אתה בטוח שברצונך למחוק אירוע זה?"))try{await (0,P.kd)((0,P.H9)(t,"events",e))}catch(e){console.error("Error deleting event:",e)}},ee=e=>{switch(e){case"holiday":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-green-200 dark:border-green-800";case"exam":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-red-200 dark:border-red-800";case"event":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border-blue-200 dark:border-blue-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border-gray-200 dark:border-gray-700"}},et=e=>{switch(e){case"holiday":return"חופשה/חג";case"exam":return"מבחן";case"event":return"אירוע";default:return"אחר"}},ea=(0,s.useMemo)(()=>{let e=[],t=[],a=[];return(W||[]).forEach(r=>{let s=w(r.date);"holiday"===r.type?e.push(s):"exam"===r.type?t.push(s):a.push(s)}),{holidays:e,exams:t,generalEvents:a}},[W]);return(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[(0,r.jsxs)(n.Zp,{className:"flex-1 border-none shadow-none lg:max-w-md",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"לוח שנה"}),(0,r.jsx)(n.BT,{children:"צפה ונהל אירועים, חגים ומבחנים."})]}),(0,r.jsx)(n.Wu,{className:"flex justify-center",children:(0,r.jsx)(l.V,{mode:"single",selected:a,onSelect:b,className:"rounded-md border shadow-sm bg-card",modifiers:ea,modifiersClassNames:{holidays:"after:content-['•'] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:text-green-500 after:text-lg",exams:"after:content-['•'] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:text-red-500 after:text-lg",generalEvents:"after:content-['•'] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:text-blue-500 after:text-lg"}})})]}),(0,r.jsxs)(n.Zp,{className:"flex-[2] border-none shadow-none h-full flex flex-col",children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.ZB,{children:a?(0,S.GP)(a,"EEEE, d בMMMM yyyy",{locale:E.he}):"בחר תאריך"}),(0,r.jsx)(n.BT,{children:0===O.length?"אין אירועים ליום זה":"".concat(O.length," אירועים מתוכננים")})]}),(0,r.jsxs)(i.$,{onClick:()=>K(),disabled:!a,children:[(0,r.jsx)(h.A,{className:"h-4 w-4 ml-2"}),"הוסף אירוע"]})]}),(0,r.jsx)(n.Wu,{className:"flex-1 overflow-hidden",children:(0,r.jsx)(f.F,{className:"h-[500px] pr-4",children:0===O.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-40 text-muted-foreground opacity-60",children:[(0,r.jsx)(p.A,{className:"h-12 w-12 mb-2"}),(0,r.jsx)("p",{children:"לא נמצאו אירועים לתאריך זה"})]}):(0,r.jsx)("div",{className:"space-y-4",children:O.map(e=>(0,r.jsxs)("div",{className:(0,J.cn)("p-4 rounded-xl border flex flex-col gap-2 transition-all hover:shadow-md","bg-card"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.E,{variant:"outline",className:(0,J.cn)("font-normal",ee(e.type)),children:et(e.type)}),(0,r.jsx)("h3",{className:"font-semibold text-lg",children:e.title})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>K(e),children:(0,r.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(i.$,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>X(e.id),children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})]})]}),e.description&&(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:e.description}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 mt-2 text-sm text-muted-foreground",children:[e.time&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(j.A,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:e.time})]}),e.location&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(N,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:e.location})]})]})]},e.id))})})})]}),(0,r.jsx)(d.lG,{open:C,onOpenChange:k,children:(0,r.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(d.c7,{children:[(0,r.jsx)(d.L3,{children:T?"ערוך אירוע":"הוסף אירוע חדש"}),(0,r.jsx)(d.rr,{children:a&&(0,S.GP)(a,"d בMMMM yyyy",{locale:E.he})})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"title",children:"כותרת"}),(0,r.jsx)(c.p,{id:"title",value:A,onChange:e=>F(e.target.value),placeholder:"טיול שנתי, מבחן במתמטיקה..."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"type",children:"סוג אירוע"}),(0,r.jsxs)(u.l6,{value:H,onValueChange:e=>q(e),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"בחר סוג"})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"event",children:"אירוע"}),(0,r.jsx)(u.eb,{value:"holiday",children:"חופשה/חג"}),(0,r.jsx)(u.eb,{value:"exam",children:"מבחן"}),(0,r.jsx)(u.eb,{value:"other",children:"אחר"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"time",children:"שעה (אופציונלי)"}),(0,r.jsx)(c.p,{id:"time",type:"time",value:Y,onChange:e=>_(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"location",children:"מיקום (אופציונלי)"}),(0,r.jsx)(c.p,{id:"location",value:G,onChange:e=>L(e.target.value),placeholder:"חדר 101, חצר..."})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o.J,{htmlFor:"description",children:"תיאור (אופציונלי)"}),(0,r.jsx)(m.T,{id:"description",value:$,onChange:e=>I(e.target.value),placeholder:"פרטים נוספים..."})]})]}),(0,r.jsxs)(d.Es,{children:[(0,r.jsx)(d.HM,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"outline",children:"ביטול"})}),(0,r.jsx)(i.$,{onClick:Q,disabled:!A.trim()||D,children:D?(0,r.jsx)(y.A,{className:"h-4 w-4 animate-spin"}):T?"שמור שינויים":"צור אירוע"})]})]})})]})}},37648:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(40157).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},59409:(e,t,a)=>{a.d(t,{bq:()=>m,eb:()=>p,gC:()=>h,l6:()=>o,yv:()=>u});var r=a(95155),s=a(12115),l=a(43433),n=a(79556),i=a(77381),d=a(10518),c=a(59434);let o=l.bL;l.YJ;let u=l.WT,m=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(l.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[s,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=l.wn.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,r.jsx)(x,{}),(0,r.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(f,{})]})})});h.displayName=l.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.JU,{ref:t,className:(0,c.cn)("py-1.5 pr-8 pl-2 text-sm font-semibold",a),...s})}).displayName=l.JU.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(l.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:s})]})});p.displayName=l.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=l.wv.displayName},88539:(e,t,a)=>{a.d(t,{T:()=>n});var r=a(95155),s=a(12115),l=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});n.displayName="Textarea"}}]);