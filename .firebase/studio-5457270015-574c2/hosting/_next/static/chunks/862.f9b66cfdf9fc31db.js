"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{16862:(e,s,l)=>{l.r(s),l.d(s,{default:()=>eu});var r=l(95155),a=l(12115),t=l(30285),n=l(18046),i=l(75074),c=l(46081),d=l(39033),o=l(52712),x=l(63540),m="Avatar",[h,u]=(0,c.A)(m),[j,f]=h(m),p=a.forwardRef((e,s)=>{let{__scopeAvatar:l,...t}=e,[n,i]=a.useState("idle");return(0,r.jsx)(j,{scope:l,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:(0,r.jsx)(x.sG.span,{...t,ref:s})})});p.displayName=m;var g="AvatarImage",v=a.forwardRef((e,s)=>{let{__scopeAvatar:l,src:t,onLoadingStatusChange:n=()=>{},...i}=e,c=f(g,l),m=function(e,s){let[l,r]=a.useState("idle");return(0,o.N)(()=>{if(!e)return void r("error");let l=!0,a=new window.Image,t=e=>()=>{l&&r(e)};return r("loading"),a.onload=t("loaded"),a.onerror=t("error"),a.src=e,s&&(a.referrerPolicy=s),()=>{l=!1}},[e,s]),l}(t,i.referrerPolicy),h=(0,d.c)(e=>{n(e),c.onImageLoadingStatusChange(e)});return(0,o.N)(()=>{"idle"!==m&&h(m)},[m,h]),"loaded"===m?(0,r.jsx)(x.sG.img,{...i,ref:s,src:t}):null});v.displayName=g;var b="AvatarFallback",N=a.forwardRef((e,s)=>{let{__scopeAvatar:l,delayMs:t,...n}=e,i=f(b,l),[c,d]=a.useState(void 0===t);return a.useEffect(()=>{if(void 0!==t){let e=window.setTimeout(()=>d(!0),t);return()=>window.clearTimeout(e)}},[t]),c&&"loaded"!==i.imageLoadingStatus?(0,r.jsx)(x.sG.span,{...n,ref:s}):null});N.displayName=b;var y=l(59434);let w=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,r.jsx)(p,{ref:s,className:(0,y.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",l),...a})});w.displayName=p.displayName,a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,r.jsx)(v,{ref:s,className:(0,y.cn)("aspect-square h-full w-full",l),...a})}).displayName=v.displayName;let k=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,r.jsx)(N,{ref:s,className:(0,y.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",l),...a})});k.displayName=N.displayName;var C=l(66695),S=l(26126),z=l(40157);let E=(0,z.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var A=l(77223),M=l(12023),I=l(51920);let R=(0,z.A)("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);var O=l(63920),$=l(44838);let B=(0,z.A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),L=e=>{let s=e.filter(e=>e.slots.length>0).map(e=>e.day.substring(0,3));return 0===s.length?"לא נוכח/ת":s.length>3?"".concat(s.slice(0,3).join(", "),"..."):s.join(", ")},T=e=>{let{status:s}=e;switch(s){case"available":return(0,r.jsx)(S.E,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"פנוי/ה"});case"teaching":return(0,r.jsx)(S.E,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300",children:"מלמד/ת"});case"absent":return(0,r.jsx)(S.E,{variant:"destructive",children:"בחופש"});case"not_in_school":return(0,r.jsx)(S.E,{variant:"outline",children:'לא בביה"ס'});default:return(0,r.jsx)(S.E,{variant:"outline",children:"לא ידוע"})}};function _(e){let{teacher:s,onMarkAbsent:l,onEdit:a,onDelete:n,onViewSchedule:i,availabilityStatus:c}=e;return(0,r.jsxs)(C.Zp,{className:"flex flex-col transition-all hover:shadow-lg hover:scale-105 duration-300 ease-in-out",children:[(0,r.jsxs)(C.aR,{className:"flex flex-row items-start gap-4",children:[(0,r.jsx)(w,{className:"h-12 w-12 border-2 border-primary/20",children:(0,r.jsx)(k,{className:"bg-primary/10 text-primary font-bold",children:s.avatar.fallback})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(C.ZB,{children:s.name}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(T,{status:c})})]}),(0,r.jsxs)($.rI,{children:[(0,r.jsx)($.ty,{asChild:!0,children:(0,r.jsxs)(t.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",children:[(0,r.jsx)(B,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,r.jsxs)($.SQ,{align:"end",children:[(0,r.jsxs)($._2,{onClick:a,children:[(0,r.jsx)(E,{className:"ml-2 h-4 w-4"}),"עריכת פרופיל"]}),(0,r.jsx)($.mB,{}),(0,r.jsxs)($._2,{onClick:n,className:"text-destructive focus:text-destructive",children:[(0,r.jsx)(A.A,{className:"ml-2 h-4 w-4"}),"מחק"]})]})]})]}),(0,r.jsxs)(C.Wu,{className:"flex-grow space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(M.A,{className:"mt-1 h-5 w-5 shrink-0 text-muted-foreground"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:"מקצועות"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.subjects.map(e=>(0,r.jsx)(S.E,{variant:"secondary",children:e},e))})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(I.A,{className:"mt-1 h-5 w-5 shrink-0 text-muted-foreground"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:"שעות נוכחות"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:L(s.availability)})]})]})]}),(0,r.jsxs)(C.wL,{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)(t.$,{variant:"outline",className:"w-full",onClick:i,children:[(0,r.jsx)(R,{className:"ml-2 h-4 w-4"}),"צפה במערכת"]}),(0,r.jsxs)(t.$,{variant:"destructive",className:"w-full",onClick:l,children:[(0,r.jsx)(O.A,{className:"ml-2 h-4 w-4"}),"סמן היעדרות"]})]})]})}var V=l(55594),G=l(62177),J=l(90221),H=l(54165),Z=l(17759),q=l(62523);let F=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,r.jsx)("textarea",{className:(0,y.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:s,...a})});F.displayName="Textarea";let P=["ראשון","שני","שלישי","רביעי","חמישי","שישי"],D=e=>{let[s,l]=e.split(":").map(Number);return s+l/60},W=(e,s)=>{if(0===e.length)return[];let l=[...e].sort((e,s)=>e-s),r=[],a=null;return l.forEach(e=>{"break"!==s[e].type&&(null===a?a={start:e,end:e}:e===a.end+1?a.end=e:(r.push({start:s[a.start].start,end:s[a.end].end}),a={start:e,end:e}))}),null!==a&&r.push({start:s[a.start].start,end:s[a.end].end}),r};function U(e){let{value:s,onChange:l,timeSlots:n}=e,[i,c]=(0,a.useState)({});(0,a.useEffect)(()=>{let e={};P.forEach(s=>{e[s]=[]}),Array.isArray(s)&&s.forEach(s=>{s.slots&&e[s.day]&&s.slots.forEach(l=>{let r=D(l.start),a=D(l.end);n.forEach((l,t)=>{if("lesson"===l.type){let i=D(l.start);if(i>=r&&i<a){var n;null==(n=e[s.day])||n.push(t)}}})})}),c(e)},[s,n]);let d=(e,s)=>{if("break"===n[s].type)return;let l={...i};l[e]||(l[e]=[]);let r=l[e],a=r.indexOf(s);a>-1?r.splice(a,1):r.push(s),x(l)},o=e=>{x({...i,[e]:[]})},x=e=>{c(e),l(Object.entries(e).map(e=>{let[s,l]=e;return{day:s,slots:W(l,n)}}))},m=n.length;return(0,r.jsxs)("div",{className:"flex flex-col gap-2",dir:"rtl",children:[(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_auto] gap-x-2",children:[(0,r.jsx)("div",{className:"grid text-center text-xs text-muted-foreground",style:{gridTemplateColumns:"repeat(".concat(m,", minmax(0, 1fr))")},children:n.map(e=>(0,r.jsx)("div",{children:e.start},e.id))}),(0,r.jsx)("div",{className:"w-24"})]}),P.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_auto] items-center gap-x-2",children:[(0,r.jsx)("div",{className:"grid gap-px bg-border rounded-md overflow-hidden",style:{gridTemplateColumns:"repeat(".concat(m,", minmax(0, 1fr))")},dir:"ltr",children:n.map((s,l)=>{var a;let t=null==(a=i[e])?void 0:a.includes(l),n="break"===s.type;return(0,r.jsx)("div",{onClick:()=>d(e,l),className:(0,y.cn)("h-7 w-full transition-colors",n?"bg-muted/50 cursor-not-allowed":"cursor-pointer",!n&&(t?"bg-primary":"bg-card hover:bg-secondary"))},"".concat(e,"-").concat(s.id))})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 w-24",children:[(0,r.jsx)("span",{className:"font-semibold text-sm",children:e}),(0,r.jsx)(t.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>o(e),children:(0,r.jsx)(A.A,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]},e))]})}var K=l(25318);function Q(e){let{value:s,onChange:l,placeholder:t}=e,[n,i]=(0,a.useState)(""),c=e=>{l(s.filter(s=>s!==e))};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:s.map(e=>(0,r.jsxs)(S.E,{variant:"secondary",children:[e,(0,r.jsx)("button",{type:"button",className:"mr-1 p-0.5 rounded-full hover:bg-muted-foreground/20",onClick:()=>c(e),children:(0,r.jsx)(K.A,{className:"h-3 w-3"})})]},e))}),(0,r.jsx)(q.p,{value:n,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n.trim()&&(e.preventDefault(),l([...s,n.trim()]),i(""))},placeholder:t})]})}var X=l(66424);let Y=V.z.object({day:V.z.string(),slots:V.z.array(V.z.object({start:V.z.string(),end:V.z.string()}))}),ee=V.z.object({name:V.z.string().min(2,{message:"השם חייב להכיל לפחות 2 תווים."}),subjects:V.z.array(V.z.string()).min(1,{message:"אנא הזן לפחות מקצוע אחד."}),availability:V.z.array(Y).min(1,{message:"אנא ציין שעות נוכחות."}),preferences:V.z.string().optional()}),es=[{day:"ראשון",slots:[]},{day:"שני",slots:[]},{day:"שלישי",slots:[]},{day:"רביעי",slots:[]},{day:"חמישי",slots:[]},{day:"שישי",slots:[]}];function el(e){let{isOpen:s,onOpenChange:l,onAddTeacher:n,onEditTeacher:i,teacherToEdit:c,timeSlots:d}=e,o=!!c,x=(0,G.mN)({resolver:(0,J.u)(ee),defaultValues:{name:"",subjects:[],availability:es,preferences:""}});(0,a.useEffect)(()=>{s&&(o&&c?x.reset({name:c.name,subjects:c.subjects,availability:c.availability.length>0?c.availability:es,preferences:c.preferences||""}):x.reset({name:"",subjects:[],availability:es,preferences:""}))},[s,o,c,x]);let m=e=>{let s={name:e.name,subjects:e.subjects,availability:e.availability,preferences:e.preferences};o&&c?i({...s,id:c.id}):n(s),l(!1)};return(0,r.jsx)(H.lG,{open:s,onOpenChange:l,children:(0,r.jsxs)(H.Cf,{className:"sm:max-w-3xl",children:[(0,r.jsxs)(H.c7,{children:[(0,r.jsx)(H.L3,{children:o?"עריכת פרופיל מורה":"יצירת פרופיל מורה"}),(0,r.jsx)(H.rr,{children:o?"עדכן את פרטי המורה. לחץ על שמירה בסיום.":"הוסף מורה חדש למערכת. לחץ על שמירה בסיום."})]}),(0,r.jsx)(X.F,{className:"max-h-[70vh] pr-6 -mr-6",children:(0,r.jsx)(Z.lV,{...x,children:(0,r.jsxs)("form",{onSubmit:x.handleSubmit(m),className:"space-y-4 py-4 pr-1",children:[(0,r.jsx)(Z.zB,{control:x.control,name:"name",render:e=>{let{field:s}=e;return(0,r.jsxs)(Z.eI,{children:[(0,r.jsx)(Z.lR,{children:"שם מלא"}),(0,r.jsx)(Z.MJ,{children:(0,r.jsx)(q.p,{placeholder:"למשל, ישראלה ישראלי",...s})}),(0,r.jsx)(Z.C5,{})]})}}),(0,r.jsx)(Z.zB,{control:x.control,name:"subjects",render:e=>{let{field:s}=e;return(0,r.jsxs)(Z.eI,{children:[(0,r.jsx)(Z.lR,{children:"מקצועות לימוד"}),(0,r.jsx)(Z.MJ,{children:(0,r.jsx)(Q,{...s,placeholder:"הקש 'Enter' להוספת מקצוע..."})}),(0,r.jsx)(Z.C5,{})]})}}),(0,r.jsx)(Z.zB,{control:x.control,name:"availability",render:e=>{let{field:s}=e;return(0,r.jsxs)(Z.eI,{children:[(0,r.jsx)(Z.lR,{children:"שעות נוכחות שבועיות"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"סמן את כל השעות בהן המורה נוכח/ת בבית הספר, כולל שיעורים קבועים והפסקות."}),(0,r.jsx)(Z.MJ,{children:(0,r.jsx)(U,{...s,timeSlots:d})}),(0,r.jsx)(Z.C5,{})]})}}),(0,r.jsx)(Z.zB,{control:x.control,name:"preferences",render:e=>{let{field:s}=e;return(0,r.jsxs)(Z.eI,{children:[(0,r.jsx)(Z.lR,{children:"העדפות (אופציונלי)"}),(0,r.jsx)(Z.MJ,{children:(0,r.jsx)(F,{placeholder:"למשל, מעדיף/ה כיתות קטנות",...s})}),(0,r.jsx)(Z.C5,{})]})}})]})})}),(0,r.jsx)(H.Es,{className:"pt-4 border-t",children:(0,r.jsx)(t.$,{type:"button",onClick:x.handleSubmit(m),children:o?"שמור שינויים":"שמור פרופיל"})})]})})}var er=l(87481),ea=l(90010),et=l(91950),en=l(59409),ei=l(14636);let ec=(0,z.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var ed=l(86578),eo=l(22346),ex=l(77324);function em(e){let{day:s,time:l,lesson:n,onSave:i,teacher:c,allClasses:d}=e,[o,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)((null==n?void 0:n.subject)||""),[u,j]=(0,a.useState)((null==n?void 0:n.classId)||null);(0,a.useEffect)(()=>{o&&(h((null==n?void 0:n.subject)||""),j((null==n?void 0:n.classId)||null))},[n,o]);let f=(0,a.useMemo)(()=>c.subjects.map(e=>({label:e,value:e})),[c.subjects]),p=(null==n?void 0:n.classId)?d.find(e=>e.id===n.classId):null;return(0,r.jsxs)(ei.AM,{open:o,onOpenChange:x,children:[(0,r.jsx)(ei.Wv,{asChild:!0,children:(0,r.jsx)("div",{className:(0,y.cn)("w-full h-full p-2 flex flex-col justify-center items-center text-center cursor-pointer min-h-[6rem] transition-colors rounded-md",n?"bg-primary/10 hover:bg-primary/20":"bg-card hover:bg-muted"),children:n&&p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-bold text-sm",children:n.subject}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:null==p?void 0:p.name})]}):(0,r.jsx)("span",{className:"text-muted-foreground text-xs",children:"ריקה"})})}),(0,r.jsx)(ei.hl,{className:"w-80",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"עריכת שיבוץ"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[c.name," - ",s,", ",l]})]}),(0,r.jsx)(eo.w,{}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,r.jsx)(M.A,{className:"w-4 h-4 text-muted-foreground"}),"מקצוע"]}),(0,r.jsx)(ex.G,{items:f,value:m,onChange:e=>h(e),placeholder:"בחר מקצוע...",searchPlaceholder:"חיפוש מקצוע...",noItemsMessage:"לא נמצאו מקצועות."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,r.jsx)(ec,{className:"w-4 h-4 text-muted-foreground"}),"כיתה"]}),(0,r.jsxs)(en.l6,{onValueChange:e=>j(e),value:u||"",disabled:!m,children:[(0,r.jsx)(en.bq,{children:(0,r.jsx)(en.yv,{placeholder:"בחר כיתה"})}),(0,r.jsx)(en.gC,{children:d.map(e=>(0,r.jsx)(en.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,r.jsx)(eo.w,{}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(t.$,{variant:"ghost",size:"sm",onClick:()=>{i(s,l,null),x(!1)},className:"text-destructive hover:text-destructive",children:[(0,r.jsx)(K.A,{className:"w-4 h-4 ml-2"}),"נקה שיבוץ"]}),(0,r.jsx)(t.$,{size:"sm",onClick:()=>{m&&u?i(s,l,{subject:m,teacherId:c.id,classId:u}):i(s,l,null),x(!1)},disabled:!(m&&u),children:"שמור"})]})]})})]})}function eh(e){let{isOpen:s,onOpenChange:l,teacher:n,allClasses:i,timeSlots:c,onUpdateSchedule:d}=e,[o,x]=(0,a.useState)({});if((0,a.useEffect)(()=>{n&&x(JSON.parse(JSON.stringify(n.schedule||{})))},[n]),!n)return null;let m=(e,s,l)=>{x(r=>{let a={...r};return a[e]||(a[e]={}),null===l?a[e]&&a[e][s]&&(a[e][s]=null):a[e][s]=l,a})};return(0,r.jsx)(H.lG,{open:s,onOpenChange:l,children:(0,r.jsxs)(H.Cf,{className:"max-w-7xl w-full flex flex-col max-h-[90vh]",children:[(0,r.jsxs)(H.c7,{children:[(0,r.jsxs)(H.L3,{children:["מערכת שעות: ",n.name]}),(0,r.jsx)(H.rr,{children:"כאן ניתן לצפות ולערוך את מערכת השעות האישית של המורה."})]}),(0,r.jsx)("div",{className:"flex-grow relative overflow-auto",children:(0,r.jsxs)(X.F,{className:"absolute inset-0",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm text-center table-fixed min-w-[900px]",children:[(0,r.jsx)("thead",{className:"bg-muted/40",children:(0,r.jsxs)("tr",{className:"bg-muted/40",children:[(0,r.jsx)("th",{className:"sticky left-0 top-0 bg-muted/40 p-2 w-40 z-20",children:"שעה"}),et.B.map(e=>(0,r.jsx)("th",{className:"sticky top-0 bg-muted/40 p-2 min-w-[140px]",children:e},e))]})}),(0,r.jsx)("tbody",{children:c.map(e=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsxs)("td",{className:"sticky left-0 font-semibold bg-card p-2 w-40 z-10 text-center",children:[(0,r.jsxs)("div",{children:[e.start," - ",e.end]}),"break"===e.type&&(0,r.jsx)(S.E,{variant:"outline",className:"mt-1",children:"הפסקה"})]}),et.B.map(s=>{var l;let a=(null==o||null==(l=o[s])?void 0:l[e.start])||null,t="break"===e.type;return(0,r.jsx)("td",{className:(0,y.cn)("p-0 align-top border-r",t&&"bg-muted/30"),children:t?(0,r.jsx)("div",{className:"p-1.5 h-full min-h-[6rem] flex flex-col justify-center",children:(0,r.jsx)(ed.A,{className:"w-5 h-5 mx-auto text-muted-foreground"})}):(0,r.jsx)(em,{day:s,time:e.start,lesson:a,onSave:m,teacher:n,allClasses:i})},"".concat(s,"-").concat(e.start))})]},e.id))})]})}),(0,r.jsx)(X.$,{orientation:"horizontal"})]})}),(0,r.jsxs)(H.Es,{className:"shrink-0 pt-4 border-t mt-4",children:[(0,r.jsx)(t.$,{onClick:()=>{d(n.id,o),l(!1)},children:"שמור שינויים"}),(0,r.jsx)(H.HM,{asChild:!0,children:(0,r.jsx)(t.$,{type:"button",variant:"secondary",children:"סגור"})})]})]})})}function eu(e){let{teachers:s,allClasses:l,timeSlots:c,onAddTeacher:d,onEditTeacher:o,onDeleteTeacher:x,onMarkAbsent:m,onUpdateTeacherSchedule:h,teacherAvailabilityNow:u}=e,{toast:j}=(0,er.dj)(),[f,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),[b,N]=(0,a.useState)(null),[y,w]=(0,a.useState)(null),[k,S]=(0,a.useState)(""),z=e=>{v(e),p(!0)},E=(s||[]).filter(e=>e.name.toLowerCase().includes(k.toLowerCase()));return(0,r.jsxs)(C.Zp,{className:"mt-6 border-none shadow-none",children:[(0,r.jsx)(C.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(C.ZB,{className:"text-xl font-bold",children:"פרופילי מורים"}),(0,r.jsx)(C.BT,{children:"ניהול מורים מחליפים וסימון היעדרויות."})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,r.jsxs)(t.$,{onClick:()=>{v(null),p(!0)},className:"shrink-0",children:[(0,r.jsx)(n.A,{className:"me-2 h-4 w-4"}),"יצירת פרופיל"]}),(0,r.jsxs)("div",{className:"relative flex-grow",children:[(0,r.jsx)(i.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(q.p,{type:"search",placeholder:"חיפוש מורה...",className:"w-full pr-9",value:k,onChange:e=>S(e.target.value)})]})]})]})}),(0,r.jsx)(C.Wu,{children:(0,r.jsxs)(ea.Lt,{open:!!b,onOpenChange:e=>!e&&N(null),children:[(0,r.jsxs)(ea.EO,{children:[(0,r.jsxs)(ea.wd,{children:[(0,r.jsx)(ea.r7,{children:"האם אתה בטוח?"}),(0,r.jsxs)(ea.$v,{children:["פעולה זו תמחק את הפרופיל של $",null==b?void 0:b.name," לצמיתות ותסיר אותו/ה מכל מערכות השעות. לא ניתן לבטל את הפעולה."]})]}),(0,r.jsxs)(ea.ck,{children:[(0,r.jsx)(ea.Zr,{children:"ביטול"}),(0,r.jsx)(ea.Rx,{className:(0,t.r)({variant:"destructive"}),onClick:()=>{b&&(x(b.id),j({variant:"destructive",title:"המורה נמחק",description:"הפרופיל של ".concat(b.name," וכל השיבוצים שלו הוסרו מהמערכת.")}),N(null))},children:"מחק"})]})]}),(s||[]).length>0?E.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:E.map(e=>(0,r.jsx)(_,{teacher:e,onMarkAbsent:()=>m(e),onEdit:()=>z(e),onDelete:()=>N(e),onViewSchedule:()=>w(e),availabilityStatus:u.get(e.id)||"unknown"},e.id))}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-border p-12 text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"לא נמצאו מורים תואמים"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"נסה מונח חיפוש אחר."})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-border p-12 text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"לא נמצאו מורים"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"התחל על ידי יצירת פרופיל מורה חדש."})]})]})}),(0,r.jsx)(el,{isOpen:f,onOpenChange:()=>{p(!1),v(null)},onAddTeacher:e=>{d(e),j({title:"פרופיל מורה נוצר",description:"הפרופיל של ".concat(e.name," נוסף למערכת.")})},onEditTeacher:e=>{o(e),v(null),j({title:"פרופיל עודכן",description:"הפרופיל של ".concat(e.name," עודכן.")})},teacherToEdit:g,timeSlots:c}),(0,r.jsx)(eh,{isOpen:!!y,onOpenChange:e=>!e&&w(null),teacher:y,allClasses:l,timeSlots:c,onUpdateSchedule:h,allTeachers:s})]})}},63920:(e,s,l)=>{l.d(s,{A:()=>r});let r=(0,l(40157).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])}}]);