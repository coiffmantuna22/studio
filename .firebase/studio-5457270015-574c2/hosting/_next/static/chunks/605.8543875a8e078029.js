"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{57605:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(95155),l=a(12115),r=a(66695),n=a(26126),c=a(66424),d=a(91950),i=a(59434),h=a(86578),o=a(63920),m=a(57804),x=a(80644),u=a(79233),p=a(76959);let f=e=>{let[t,a]=e.split(":").map(Number);return t+a/60};function y(e){let{allTeachers:t,timeSlots:a}=e,y=(0,l.useMemo)(()=>{let e={},s=(0,x.o)(new Date),l=["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"];return d.B.forEach(t=>{e[t]={},a.forEach(a=>{"break"!==a.type&&(e[t][a.start]=[])})}),(t||[]).forEach(t=>{let r=l[(0,u.P)(s)],n=(t.absences||[]).filter(e=>(0,p.r)(new Date(e.date),s)),c=t.schedule||{};d.B.forEach(s=>{let l=t.availability.find(e=>e.day===s);l&&l.slots.forEach(l=>{let d=f(l.start),i=f(l.end);a.forEach(a=>{if("lesson"===a.type){let o=f(a.start);if(o>=d&&o<i){var l,h;if(!(null==(l=c[s])?void 0:l[a.start])&&(null==(h=e[s])?void 0:h[a.start])){let l=!1;if(s===r&&n.length>0){let e=f(a.start);l=n.some(t=>{if(t.isAllDay)return!0;let a=f(t.startTime),s=f(t.endTime);return e>=a&&e<s})}e[s][a.start].push({name:t.name,isAbsent:l})}}}})})})}),e},[t,a]);return(0,s.jsxs)(r.Zp,{className:"mt-6 border-none shadow-none",children:[(0,s.jsxs)(r.aR,{children:[(0,s.jsx)(r.ZB,{className:"text-xl",children:"זמינות מורים להחלפה"}),(0,s.jsx)(r.BT,{children:"הטבלה מציגה מורים הנוכחים בבית הספר אך אינם משובצים לשיעור."})]}),(0,s.jsx)(r.Wu,{children:(0,s.jsxs)(c.F,{className:"w-full whitespace-nowrap rounded-md border",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-center table-fixed min-w-[900px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-muted/40",children:[(0,s.jsx)("th",{className:"sticky left-0 top-0 bg-muted/40 p-2 w-40 z-20",children:"שעה"}),d.B.map(e=>(0,s.jsx)("th",{className:"sticky top-0 bg-muted/40 p-2 min-w-[150px]",children:e},e))]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsxs)("td",{className:"sticky left-0 font-semibold bg-card p-2 w-40 z-10 text-center",children:[(0,s.jsxs)("div",{children:[e.start," - ",e.end]}),"break"===e.type&&(0,s.jsx)(n.E,{variant:"outline",className:"mt-1",children:"הפסקה"})]}),d.B.map(t=>{var a,l;return(0,s.jsx)("td",{className:(0,i.cn)("p-2 align-top h-24 border-r","break"===e.type&&"bg-muted/30"),children:"break"===e.type?(0,s.jsx)(h.A,{className:"w-5 h-5 mx-auto text-muted-foreground"}):(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5 justify-center",children:(null==(l=y[t])||null==(a=l[e.start])?void 0:a.length)>0?y[t][e.start].map(e=>(0,s.jsxs)(n.E,{variant:e.isAbsent?"destructive":"secondary",className:"font-normal",children:[e.isAbsent?(0,s.jsx)(o.A,{className:"h-3 w-3 ml-1"}):(0,s.jsx)(m.A,{className:"h-3 w-3 ml-1"}),e.name]},e.name)):(0,s.jsx)("span",{className:"text-muted-foreground text-xs opacity-70",children:"--"})})},"".concat(t,"-").concat(e.start))})]},e.id))})]})}),(0,s.jsx)(c.$,{orientation:"horizontal"})]})})]})}},63920:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(40157).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},86578:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(40157).A)("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]])}}]);