"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{18046:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(40157).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},59409:(e,t,a)=>{a.d(t,{bq:()=>m,eb:()=>p,gC:()=>f,l6:()=>o,yv:()=>x});var s=a(95155),r=a(12115),l=a(43433),i=a(79556),d=a(77381),n=a(10518),c=a(59434);let o=l.bL;l.YJ;let x=l.WT,m=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(l.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=l.PP.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=l.wn.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,position:i="popper",...d}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...d,children:[(0,s.jsx)(h,{}),(0,s.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(u,{})]})})});f.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,c.cn)("py-1.5 pr-8 pl-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(l.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});p.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},64806:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var s=a(95155),r=a(12115),l=a(85511),i=a(66695),d=a(30285),n=a(54165),c=a(62523),o=a(85057),x=a(59409),m=a(88539),h=a(26126),u=a(66424),f=a(18046),p=a(51920),g=a(77223),j=a(37648);let y=(0,a(40157).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var b=a(50172),v=a(76959),N=a(83343),w=a(83013),k=a(46375),C=a(19599),M=a(35317),A=a(23769),P=a(97714),E=a(59434),S=a(38274),F=a(19114),J=a(33143);function R(){let{user:e}=(0,C.useUser)(),t=(0,C.useFirestore)(),[a,R]=(0,r.useState)(new Date),[T,z]=(0,r.useState)(!1),[H,L]=(0,r.useState)(!1),[_,q]=(0,r.useState)(null),[G,U]=(0,r.useState)(!1),[Z,$]=(0,r.useState)(""),[B,I]=(0,r.useState)(""),[V,W]=(0,r.useState)("event"),[D,O]=(0,r.useState)(""),[Y,K]=(0,r.useState)(""),Q=(0,C.useMemoFirebase)(()=>e?(0,M.P)((0,M.rJ)(t,"events"),(0,M._M)("userId","==",e.uid)):null,[e,t]),{data:X=[],isLoading:ee}=(0,A.G)(Q),et=(0,r.useMemo)(()=>a?(X||[]).filter(e=>(0,v.r)((0,N.H)(e.date),a)):[],[a,X]),ea=e=>{e?(q(e),$(e.title),I(e.description||""),W(e.type),O(e.location||""),K(e.time||"")):(q(null),$(""),I(""),W("event"),O(""),K("")),z(!0)},es=async()=>{if(e&&a&&Z.trim()){L(!0);try{let s=(0,M.wP)(t),r={date:(0,w.GP)(a,"yyyy-MM-dd"),title:Z,description:B,type:V,location:D,time:Y,userId:e.uid};if(_){let e=(0,M.H9)(t,"events",_.id);s.update(e,r),await (0,P.j)(s,{operation:"update",path:"events/".concat(_.id),data:r})}else{let e=(0,M.H9)((0,M.rJ)(t,"events"));s.set(e,{...r,id:e.id}),await (0,P.j)(s,{operation:"create",path:"events/".concat(e.id),data:r})}U(!0),setTimeout(()=>{z(!1),U(!1)},2e3)}catch(e){console.error("Error saving event:",e)}finally{L(!1)}}},er=async e=>{if(confirm("האם אתה בטוח שברצונך למחוק אירוע זה?"))try{await (0,M.kd)((0,M.H9)(t,"events",e))}catch(e){console.error("Error deleting event:",e)}},el=e=>{switch(e){case"holiday":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-green-200 dark:border-green-800";case"exam":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-red-200 dark:border-red-800";case"event":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border-blue-200 dark:border-blue-800";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border-gray-200 dark:border-gray-700"}},ei=e=>{switch(e){case"holiday":return"חופשה/חג";case"exam":return"מבחן";case"event":return"אירוע";default:return"אחר"}},ed=(0,r.useMemo)(()=>{let e=[],t=[],a=[];return(X||[]).forEach(s=>{let r=(0,N.H)(s.date);"holiday"===s.type?e.push(r):"exam"===s.type?t.push(r):a.push(r)}),{holidays:e,exams:t,generalEvents:a}},[X]);return(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[(0,s.jsxs)(i.Zp,{className:"flex-1 border-none shadow-none lg:max-w-md",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"לוח שנה"}),(0,s.jsx)(i.BT,{children:"צפה ונהל אירועים, חגים ומבחנים."})]}),(0,s.jsx)(i.Wu,{className:"flex justify-center",children:(0,s.jsx)(l.V,{mode:"single",selected:a,onSelect:R,className:"rounded-md border shadow-sm bg-card",modifiers:ed,modifiersClassNames:{holidays:"after:content-['•'] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:text-green-500 after:text-lg",exams:"after:content-['•'] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:text-red-500 after:text-lg",generalEvents:"after:content-['•'] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:text-blue-500 after:text-lg"}})})]}),(0,s.jsxs)(i.Zp,{className:"flex-[2] border-none shadow-none h-full flex flex-col",children:[(0,s.jsxs)(i.aR,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{children:a?(0,w.GP)(a,"EEEE, d בMMMM yyyy",{locale:k.he}):"בחר תאריך"}),(0,s.jsx)(i.BT,{children:0===et.length?"אין אירועים ליום זה":"".concat(et.length," אירועים מתוכננים")})]}),(0,s.jsxs)(d.$,{onClick:()=>ea(),disabled:!a,children:[(0,s.jsx)(f.A,{className:"h-4 w-4 ml-2"}),"הוסף אירוע"]})]}),(0,s.jsx)(i.Wu,{className:"flex-1 overflow-hidden",children:(0,s.jsx)(u.F,{className:"h-[500px] pr-4",children:0===et.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-40 text-muted-foreground opacity-60",children:[(0,s.jsx)(p.A,{className:"h-12 w-12 mb-2"}),(0,s.jsx)("p",{children:"לא נמצאו אירועים לתאריך זה"})]}):(0,s.jsx)(S.P.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:(0,s.jsx)(F.N,{mode:"popLayout",children:et.map(e=>(0,s.jsxs)(S.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.2},className:(0,E.cn)("p-4 rounded-xl border flex flex-col gap-2 transition-all hover:shadow-md","bg-card"),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.E,{variant:"outline",className:(0,E.cn)("font-normal",el(e.type)),children:ei(e.type)}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.title})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>ea(e),children:(0,s.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>er(e.id),children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})]})]}),e.description&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 mt-2 text-sm text-muted-foreground",children:[e.time&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(j.A,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:e.time})]}),e.location&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(y,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:e.location})]})]})]},e.id))})})})})]}),(0,s.jsx)(n.lG,{open:T,onOpenChange:z,children:(0,s.jsx)(n.Cf,{className:"sm:max-w-[425px]",children:G?(0,s.jsx)(J._,{message:_?"האירוע עודכן בהצלחה!":"האירוע נוצר בהצלחה!"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.c7,{children:[(0,s.jsx)(n.L3,{children:_?"ערוך אירוע":"הוסף אירוע חדש"}),(0,s.jsx)(n.rr,{children:a&&(0,w.GP)(a,"d בMMMM yyyy",{locale:k.he})})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"title",children:"כותרת"}),(0,s.jsx)(c.p,{id:"title",value:Z,onChange:e=>$(e.target.value),placeholder:"טיול שנתי, מבחן במתמטיקה..."})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"type",children:"סוג אירוע"}),(0,s.jsxs)(x.l6,{value:V,onValueChange:e=>W(e),children:[(0,s.jsx)(x.bq,{children:(0,s.jsx)(x.yv,{placeholder:"בחר סוג"})}),(0,s.jsxs)(x.gC,{children:[(0,s.jsx)(x.eb,{value:"event",children:"אירוע"}),(0,s.jsx)(x.eb,{value:"holiday",children:"חופשה/חג"}),(0,s.jsx)(x.eb,{value:"exam",children:"מבחן"}),(0,s.jsx)(x.eb,{value:"other",children:"אחר"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"time",children:"שעה (אופציונלי)"}),(0,s.jsx)(c.p,{id:"time",type:"time",value:Y,onChange:e=>K(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"location",children:"מיקום (אופציונלי)"}),(0,s.jsx)(c.p,{id:"location",value:D,onChange:e=>O(e.target.value),placeholder:"חדר 101, חצר..."})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"description",children:"תיאור (אופציונלי)"}),(0,s.jsx)(m.T,{id:"description",value:B,onChange:e=>I(e.target.value),placeholder:"פרטים נוספים..."})]})]}),(0,s.jsxs)(n.Es,{children:[(0,s.jsx)(n.HM,{asChild:!0,children:(0,s.jsx)(d.$,{variant:"outline",children:"ביטול"})}),(0,s.jsx)(d.$,{onClick:es,disabled:!Z.trim()||H,children:H?(0,s.jsx)(b.A,{className:"h-4 w-4 animate-spin"}):_?"שמור שינויים":"צור אירוע"})]})]})})})]})}},88539:(e,t,a)=>{a.d(t,{T:()=>i});var s=a(95155),r=a(12115),l=a(59434);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});i.displayName="Textarea"}}]);